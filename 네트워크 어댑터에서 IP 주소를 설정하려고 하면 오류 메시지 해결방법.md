# 네트워크 어댑터에서 IP 주소를 설정하려고 하면 오류 메시지 해결방법

**- 현상**

네트워크 어댑터에서 IP 주소를 설정하려고 하면 다음과 유사한 오류 메시지가 나타날 수 있습니다.

네트워크 어댑터에 사용자가 입력한 XXX.XXX.XXX.XXX IP 주소는 이미 Name of adapter 어댑터에 할당되었습니다. 컴퓨터에 실제로 존재하지 않거나 작동하지 않는 레거시 어댑터이기 때문에 Name of adapter은(는) 네트워크 및 전화 접속 연결 폴더에서 숨겨져 있습니다. 어댑터에 같은 주소로 할당하고 사용하면, 하나의 어댑터만 이 주소를 사용하게 됩니다. 이는 올바르지 않은 시스템 구성을 초래합니다. 고급 대화 상자의 IP 주소 목록에 다른 IP 주소를 입력하시겠습니까?

여기서 XXX.XXX.XXX.XXX는 설정하려고 하는 IP 주소이고 Name of adapter는 레지스트리에는 있지만 장치 관리자에는 표시되지 않는 네트워크 어댑터의 이름입니다.

**예**를 누르면 장치 관리자에 현재 표시되어 있는 네트워크 어댑터의 IP 주소를 다른 IP 주소로 변경할 수 있는 TCP/IP 속성이 나타납니다. **아니요**를 누르면 IP 주소가 네트워크 어댑터에 할당됩니다. **아니요**를 누르면 장치 관리자에서 선택한 네트워크 어댑터와 고스트된 네트워크 어댑터가 같은 IP 주소를 사용하게 됩니다. 대부분의 경우 드라이버가 사용할 수 없게 설정되므로 이로 인해 문제가 발생하지는 않습니다.

 

**- 원인**

동일한 IP 주소를 가진 네트워크 어댑터가 레지스트리에 있지만 장치 관리자에 표시되지 않습니다. 이 문제는 네트워크 카드를 한 PCI 슬롯에서 다른 PCI 슬롯으로 이동한 경우 발생할 수 있습니다.

또는 기존 랜카드를 윈도우상에서 제거하지 물리적으로 제거한뒤 새로운 랜카드에 기존의 동일한 고정IP를 입력하면 문제가 발생한다. 보통 아래의 해결 방법1로 해결이 됨.



**- 해결방법**

이 문제를 해결하려면 다음 방법 중 하나를 사용하여 레지스트리에서 고스트된 네트워크 어댑터를 제거하십시오.

방법 1

1. **시작**, **실행**을 차례로 누르고 cmd.exe를 입력한 다음 Enter 키를 누릅니다.

2. set devmgr_show_nonpresent_devices=1을 입력한 다음 Enter 키를 누릅니다.

3. Start DEVMGMT.MSC를 입력한 다음 Enter 키를 누릅니다.

4. **보기**를 누른 다음 **숨김 장치 표시**를 누릅니다.

5. **네트워크 어댑터** 트리를 확장합니다.

6. 희미하게 표시된 네트워크 어댑터를 마우스 오른쪽 단추로 누른 다음 **제거**를 누릅니다.

   ![image](https://user-images.githubusercontent.com/46669551/54326616-4c1cf080-464a-11e9-8c70-516c115007e6.png)



방법 2 (위의 방법으로도 제거가 안되면 아래 방법으로 해결가능)

DevCon 유틸리티는 장치 관리자 대신 사용할 수 있는 명령줄 유틸리티입니다. DevCon을 사용하면 개별 장치나 장치 그룹을 사용 또는 사용하지 않도록 설정, 다시 시작, 업데이트, 제거 및 쿼리할 수 있습니다. DevCon을 사용하려면 다음과 같이 하십시오.

1. 다음 Microsoft 기술 자료 문서로 이동하여 DevCon 도구를 다운로드합니다.

   [311272](http://support.microsoft.com/kb/311272/)(http://support.microsoft.com/kb/311272/ ) 장치 관리자 대신 사용할 수 있는 DevCon 명령줄 유틸리티 --> 이통에도 저장해 뒀다.

2. 로컬 폴더에 32비트 또는 64비트 DevCon 도구 바이너리의 압축을 풉니다.

3. **시작**, **실행**을 차례로 누르고 cmd를 입력한 다음 Enter 키를 누릅니다.

4. CD:\path_to_binaries를 입력하여 devcon.exe가 있는 위치로 이동합니다.

5. 다음 구문을 사용하여 설치된 네트워크 어댑터를 찾습니다.

    

   devcon findall =net

    

   또는

    

   devcon listclass net 

   참고

    

   위의 명령을 실행하면 고스트된 네트워크 어댑터를 나타내는 다음과 유사한 줄이 출력됩니다.

   PCI\VEN_10B7&DEV_9200&SUBSYS_00D81028&REV_78\4&19FD8D60&0&58F0: 3Com 3C920 Integrated Fast Ethernet Controller (3C905C-TX Compatible)

6. 다음 구문을 입력하여 고스트된 장치를 제거합니다.

   devcon -r remove "@PCI\VEN_10B7&DEV_9200&SUBSYS_00D81028&REV_78\4&19FD8D60&0&58F0"

**아래는 실제 RTL-8139D 이더넷 카드를 제거 했을때 사용방법이다. 1번 방법으로 장치가 제거되지 않았을때 방법2로 제거하면 문제가 확실히 해결된다.**

D:\i386>devcon findall =net

위 명령어를 때려서 문제의 RTL-8139D 이더넷카드를 제거 한다.
PCI\VEN_10EC&DEV_8139&SUBSYS_813910AC&REV_10\4&25700A26&0&5020: Realtek RTL8139 Family PCI Fast Ethernet NIC #2
devcon -r remove 